"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPreciseScrollbarSize=void 0;const constants_js_1=require("./constants.js"),getStyle_js_1=require("./getStyle.js"),SUBPIXEL_OFFSET=new Map;let testStyleElement=null,testParentElement=null,testChildElement=null;function getSubpixelScrollbarSize(e,t){const n=e.split(".");let l=SUBPIXEL_OFFSET.get(n[1]);if(void 0===l){testStyleElement||(testStyleElement=document.createElement("style")),testStyleElement.innerHTML=`\n      #mezr-scrollbar-test::-webkit-scrollbar {\n        width: ${e} !important;\n      }\n    `,testParentElement&&testChildElement||(testParentElement=document.createElement("div"),testChildElement=document.createElement("div"),testParentElement.appendChild(testChildElement),testParentElement.id="mezr-scrollbar-test",testParentElement.style.cssText="\n        all: unset !important;\n        position: fixed !important;\n        top: -200px !important;\n        left: 0px !important;\n        width: 100px !important;\n        height: 100px !important;\n        overflow: scroll !important;\n        pointer-events: none !important;\n        visibility: hidden !important;\n      ",testChildElement.style.cssText="\n        all: unset !important;\n        position: absolute !important;\n        inset: 0 !important;\n      "),document.body.appendChild(testStyleElement),document.body.appendChild(testParentElement);l=testParentElement.getBoundingClientRect().width-testChildElement.getBoundingClientRect().width-t,SUBPIXEL_OFFSET.set(n[1],l),document.body.removeChild(testParentElement),document.body.removeChild(testStyleElement)}return t+l}function getPreciseScrollbarSize(e,t,n){if(n<=0)return 0;if(constants_js_1.IS_CHROMIUM){const n=(0,getStyle_js_1.getStyle)(e,"::-webkit-scrollbar"),l="x"===t?n.height:n.width,i=parseFloat(l);if(!Number.isNaN(i)&&!Number.isInteger(i))return getSubpixelScrollbarSize(l,i)}return n}exports.getPreciseScrollbarSize=getPreciseScrollbarSize;