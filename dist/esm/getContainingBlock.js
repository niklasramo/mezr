import{getStyle}from"./utils/getStyle.js";import{isContainingBlockForFixedElement}from"./utils/isContainingBlockForFixedElement.js";import{isContainingBlockForAbsoluteElement}from"./utils/isContainingBlockForAbsoluteElement.js";import{isBlockElement}from"./utils/isBlockElement.js";import{isDocumentElement}from"./utils/isDocumentElement.js";export function getContainingBlock(e,t={}){if(isDocumentElement(e))return e.ownerDocument.defaultView;const n=t.position||getStyle(e).position,{skipDisplayNone:i,container:o}=t;switch(n){case"static":case"relative":case"sticky":case"-webkit-sticky":{let t=o||e.parentElement;for(;t;){const e=isBlockElement(t);if(e)return t;if(null===e&&!i)return null;t=t.parentElement}return e.ownerDocument.documentElement}case"absolute":case"fixed":{const t="fixed"===n;let l=o||e.parentElement;for(;l;){const e=t?isContainingBlockForFixedElement(l):isContainingBlockForAbsoluteElement(l);if(!0===e)return l;if(null===e&&!i)return null;l=l.parentElement}return e.ownerDocument.defaultView}default:return null}}