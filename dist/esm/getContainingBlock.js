import{getStyle}from"./utils/getStyle.js";import{isContainingBlockForFixedElement}from"./utils/isContainingBlockForFixedElement.js";import{isContainingBlockForAbsoluteElement}from"./utils/isContainingBlockForAbsoluteElement.js";import{isBlockElement}from"./utils/isBlockElement.js";import{isDocumentElement}from"./utils/isDocumentElement.js";export function getContainingBlock(e,t={}){if(isDocumentElement(e))return e.ownerDocument.defaultView;const n=t.position||getStyle(e).position,{skipDisplayNone:i}=t;switch(n){case"static":case"relative":case"sticky":case"-webkit-sticky":{let t=e.parentElement;for(;t;){const e=isBlockElement(t);if(e)return t;if(null===e&&!i)return null;t=t.parentElement}return e.ownerDocument.documentElement}case"absolute":case"fixed":{const t="fixed"===n;let o=e.parentElement;for(;o;){const e=t?isContainingBlockForFixedElement(o):isContainingBlockForAbsoluteElement(o);if(!0===e)return o;if(null===e&&!i)return null;o=o.parentElement}return e.ownerDocument.defaultView}default:return null}}